{extend name="layout/base"}
{block name="main"}
<!--左栏-->
<div class="left">
    <ul class="cl">
        <!--顶级分类-->
        <li v-for="vo,index in menu" :class="{hidden:vo.hidden}">
            <a href="javascript:;" :class="{active:vo.active}" @click="onActive(index)">
                <i class="layui-icon" v-html="vo.icon"></i>
                <span v-text="vo.name"></span>
                <i class="layui-icon arrow" v-show="vo.url.length==0">&#xe61a;</i> <i v-show="vo.active"
                                                                                      class="layui-icon active">&#xe623;</i>
            </a>
            <!--子级分类-->
            <div v-for="vo2,index2 in vo.list">
                <a href="javascript:;" :class="{active:vo2.active}" @click="onActive(index,index2)"
                   v-text="vo2.name"></a>
                <i v-show="vo2.active" class="layui-icon active">&#xe623;</i>
            </div>
        </li>
    </ul>
</div>
<!--右侧-->
<div class="right">
    <a href="/admin/cate/create" class="layui-btn"><i class="layui-icon">&#xe654;</i>添加栏目</a>
    <table class="layui-table layui-form">
        <colgroup>
            <col width="80">
            <col width="80">
            <col width="150">
            <col width="80">
            <col width="80">
            <col width="80">
            <col>
            <col width="150">
        </colgroup>
        <thead>
        <tr>
            <th>ID</th>
            <th>排序</th>
            <th>名称</th>
            <th>显示</th>
            <th>创建时间</th>
            <th>操作</th>
        </tr>
        </thead>
        <tbody>
        {foreach $categorys as $key=>$vo }
        <tr class="id9">
            <td>{$vo.id}</td>
            <td><input type="text" style="width: 4em" value="{$vo.sort}" name="" id="" class="layui-input"></td>
            <td>{$vo.name}</td>
            <td><input data-id="9" lay-filter="state" type="checkbox" {if $vo.state eq 1} checked {/if} lay-text="开启|关闭" lay-skin="switch"></td>
            <td>{$vo.create_time}</td>
            <td><a href="/admin/category/update/id/9.html">修改</a> | <a class="del" data-id=".id9"
                                                                       href="/admin/category/del/id/9.html">删除</a></td>
        </tr>
        {/foreach}
        </tbody>
    </table>
</div>
{/block}
{block name="script"}
<script>
    layui.use('form', function () {
        var form = layui.form, layer = layui.layer, $ = layui.jquery;

        form.on('switch(state)', function (data) {
            var id = $(data.elem).attr("data-id");
            $.ajax({
                url: "/admin/category/state/type/state.html",
                data: {
                    id: id,
                },
                type: "get",
                dataType: "json",
                success: function (e) {
                    if (e.code == 1) {
                        layer.msg(e.msg, {
                            icon: 1
                        });
                    } else {
                        layer.msg(e.msg, {
                            icon: 2,
                            shade: 0.5,
                            time: 2000,
                            shadeClose: true
                        });
                    }
                }
            });
        });

    });
</script>
{/block}